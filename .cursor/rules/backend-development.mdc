---
globs: backend/**/*.cs,backend/**/*.json
---
# .NET Backend Development Rules

## Architecture
- Use .NET 8 Web API with MongoDB integration
- Follow RESTful API design principles
- Implement proper error handling and logging
- Use dependency injection for services

## Key Files
- Main API project: [backend/JwstDataAnalysis.API/](mdc:backend/JwstDataAnalysis.API/)
- Controllers: [backend/JwstDataAnalysis.API/Controllers/JwstDataController.cs](mdc:backend/JwstDataAnalysis.API/Controllers/JwstDataController.cs)
- Models: [backend/JwstDataAnalysis.API/Models/JwstDataModel.cs](mdc:backend/JwstDataAnalysis.API/Models/JwstDataModel.cs)
- Services: [backend/JwstDataAnalysis.API/Services/MongoDBService.cs](mdc:backend/JwstDataAnalysis.API/Services/MongoDBService.cs)
- Configuration: [backend/JwstDataAnalysis.API/appsettings.json](mdc:backend/JwstDataAnalysis.API/appsettings.json)

## Coding Standards
- Use async/await for all database operations
- Implement proper validation using DataAnnotations
- Use structured logging with ILogger
- Follow C# naming conventions (PascalCase for public members)
- Use MongoDB.Driver for database operations
- Implement proper CORS configuration for frontend integration

## API Endpoints
Current endpoints in JwstDataController:
- GET /api/jwstdata - Get all data
- GET /api/jwstdata/{id} - Get by ID
- GET /api/jwstdata/type/{dataType} - Filter by type
- GET /api/jwstdata/status/{status} - Filter by status
- GET /api/jwstdata/search/{searchTerm} - Search data
- POST /api/jwstdata - Create new data
- PUT /api/jwstdata/{id} - Update data
- DELETE /api/jwstdata/{id} - Delete data
- POST /api/jwstdata/{id}/process - Process data

## Data Models
- JwstDataModel: Main data entity with flexible metadata
- ImageMetadata: For image-specific data
- SensorMetadata: For sensor/spectral data
- ProcessingResult: For processing outcomes

## Security Notes
- Current MongoDB credentials are for development only
- Implement proper authentication in Phase 2
- Use environment variables for sensitive configuration
```

## 3. Frontend Development Rules

```markdown:.cursor/rules/frontend-development.mdc
---
globs: frontend/**/*.tsx,frontend/**/*.ts,frontend/**/*.css
---
# React Frontend Development Rules

## Architecture
- React 19 with TypeScript
- Functional components with hooks
- Modern CSS with responsive design
- Accessibility-first approach

## Key Files
- Main app: [frontend/jwst-frontend/src/App.tsx](mdc:frontend/jwst-frontend/src/App.tsx)
- Dashboard component: [frontend/jwst-frontend/src/components/JwstDataDashboard.tsx](mdc:frontend/jwst-frontend/src/components/JwstDataDashboard.tsx)
- Types: [frontend/jwst-frontend/src/types/JwstDataTypes.ts](mdc:frontend/jwst-frontend/src/types/JwstDataTypes.ts)
- Styles: [frontend/jwst-frontend/src/App.css](mdc:frontend/jwst-frontend/src/App.css)
- Package config: [frontend/jwst-frontend/package.json](mdc:frontend/jwst-frontend/package.json)

## Coding Standards
- Use TypeScript interfaces for all data models
- Implement proper error handling and loading states
- Use semantic HTML with proper accessibility attributes
- Follow React best practices (hooks, functional components)
- Use CSS classes for styling (no inline styles)
- Implement responsive design for mobile compatibility

## Component Structure
- JwstDataDashboard: Main dashboard with data grid and controls
- App: Root component with data fetching and error handling
- Types: JwstDataModel, ImageMetadata, SensorMetadata, ProcessingResult

## API Integration
- Backend API base URL: http://localhost:5001
- Use fetch API for HTTP requests
- Implement proper error handling for API calls
- Use async/await for data operations

## UI/UX Guidelines
- Current theme: "Sunset Galaxy" gradient background
- Use consistent spacing and typography
- Implement loading spinners for async operations
- Provide clear error messages and retry options
- Use status indicators for processing states
- Implement search and filtering functionality

## Accessibility
- Use proper ARIA labels and roles
- Implement keyboard navigation
- Provide alt text for images
- Use semantic HTML elements
- Ensure sufficient color contrast
```

## 4. Processing Engine Rules

```markdown:.cursor/rules/processing-engine.mdc
---
globs: processing-engine/**/*.py
---
# Python Processing Engine Rules

## Architecture
- FastAPI framework for scientific computing service
- Async processing capabilities
- Integration with scientific libraries (NumPy, SciPy, Astropy)
- RESTful API for processing requests

## Key Files
- Main application: [processing-engine/main.py](mdc:processing-engine/main.py)
- Dependencies: [processing-engine/requirements.txt](mdc:processing-engine/requirements.txt)
- Docker config: [processing-engine/Dockerfile](mdc:processing-engine/Dockerfile)

## Coding Standards
- Use FastAPI for API development
- Implement proper error handling with HTTPException
- Use Pydantic models for request/response validation
- Use async/await for processing operations
- Implement comprehensive logging
- Follow Python PEP 8 style guidelines

## API Endpoints
- GET / - Service information
- GET /health - Health check
- POST /process - Process JWST data
- GET /algorithms - List available algorithms

## Processing Algorithms
Current placeholder algorithms (to be implemented in Phase 3):
- basic_analysis: Statistical analysis
- image_enhancement: Image quality improvement
- noise_reduction: Noise reduction algorithms

## Integration
- Service runs on port 8000
- Integrates with .NET backend for processing requests
- Uses shared data volume for file access
- Returns processing results to backend

## Scientific Computing
- Prepare for Astropy integration for FITS file handling
- Implement NumPy/SciPy for mathematical operations
- Use proper data validation for astronomical data
- Implement progress tracking for long-running processes
```

## 5. Docker and Deployment Rules

```markdown:.cursor/rules/docker-deployment.mdc
---
globs: docker/**/*.yml,docker/**/*.yaml,**/Dockerfile
---
# Docker and Deployment Rules

## Architecture
- Multi-service Docker Compose setup
- Separate containers for each service
- Shared network for inter-service communication
- Volume mounting for data persistence

## Key Files
- Docker Compose: [docker/docker-compose.yml](mdc:docker/docker-compose.yml)
- Backend Dockerfile: [backend/JwstDataAnalysis.API/Dockerfile](mdc:backend/JwstDataAnalysis.API/Dockerfile)
- Frontend Dockerfile: [frontend/jwst-frontend/Dockerfile](mdc:frontend/jwst-frontend/Dockerfile)
- Processing Engine Dockerfile: [processing-engine/Dockerfile](mdc:processing-engine/Dockerfile)

## Services
- mongodb: Database service (port 27017)
- backend: .NET API service (port 5001)
- frontend: React application (port 3000)
- processing-engine: Python service (port 8000)

## Configuration
- Use environment variables for service configuration
- Implement proper health checks
- Use restart policies for production readiness
- Configure proper networking between services

## Development vs Production
- Current setup is for development
- Use proper secrets management for production
- Implement proper logging and monitoring
- Use production-grade MongoDB configuration

## Security Considerations
- Default MongoDB credentials are for development only
- Implement proper authentication in production
- Use secrets management for sensitive data
- Configure proper network security
```

## 6. Database and Data Models Rules

```markdown:.cursor/rules/database-models.mdc
---
globs: backend/**/*.cs,processing-engine/**/*.py
---
# Database and Data Models Rules

## Architecture
- MongoDB document database for flexible data storage
- Flexible schemas for various JWST data types
- Support for metadata and processing results
- Proper indexing for performance

## Data Models
- JwstDataModel: Main data entity
- ImageMetadata: Image-specific information
- SensorMetadata: Sensor and spectral data
- ProcessingResult: Processing outcomes and results

## MongoDB Configuration
- Connection string: mongodb://admin:password@mongodb:27017
- Database name: jwst_data_analysis
- Collection: jwst_data

## Data Types Supported
- image: Astronomical images (FITS, JPG, PNG, TIFF)
- sensor: Raw sensor data
- spectral: Spectral analysis data
- metadata: Descriptive information

## Schema Design
- Use flexible document structure for metadata
- Implement proper validation
- Support for file paths and processing status
- Include user and timestamp information

## Performance Considerations
- Implement proper indexing for search operations
- Use efficient queries for large datasets
- Consider data archiving strategies
- Implement proper error handling for database operations

## Security
- Current credentials are development-only
- Implement proper access control in production
- Use connection string encryption
- Implement proper backup strategies
```

## 7. Development Workflow Rules

```markdown:.cursor/rules/development-workflow.mdc
---
alwaysApply: true
---
# Development Workflow Rules

## Git Management
- Repository is properly initialized and connected to GitHub
- Use feature branches for development
- Follow conventional commit messages
- Keep commits atomic and focused

## Development Phases
Current focus: Phase 2 - Core Infrastructure
- Authentication and authorization
- File upload implementation
- FITS file processing
- Enhanced database schemas
- API enhancements

## Testing Strategy
- Implement unit tests for all services
- Use integration tests for API endpoints
- Test processing algorithms thoroughly
- Implement end-to-end testing

## Code Quality
- Use linting and formatting tools
- Implement proper error handling
- Follow coding standards for each technology
- Use TypeScript for type safety
- Implement proper logging and monitoring

## Security Best Practices
- Never commit sensitive credentials
- Use environment variables for configuration
- Implement proper input validation
- Follow OWASP security guidelines
- Regular security audits

## Documentation
- Keep README.md updated
- Document API endpoints
- Maintain development plan
- Use inline code documentation
- Create user guides for features

## Deployment
- Use Docker for consistent environments
- Implement CI/CD pipelines
- Use proper environment management
- Monitor application health
- Implement proper backup strategies
```

These Cursor rules provide comprehensive guidance for your JWST data analysis project. They cover:

1. **Project Overview** - High-level architecture and current status
2. **Backend Development** - .NET API standards and patterns
3. **Frontend Development** - React/TypeScript guidelines
4. **Processing Engine** - Python FastAPI service rules
5. **Docker & Deployment** - Containerization and deployment guidelines
6. **Database & Models** - MongoDB and data modeling standards
7. **Development Workflow** - General development practices

The rules will help maintain consistency across your microservices architecture and guide development through the remaining phases of your project. They reference specific files in your codebase and provide context-aware guidance based on the current state of your JWST data analysis application.
description:
globs:
alwaysApply: false
---
