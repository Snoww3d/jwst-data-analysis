# JWST Data Analysis - Environment Configuration
# Copy this file to .env and update values for your environment
#
# IMPORTANT: Never commit .env files with real credentials to git!
#
# Usage:
#   Development: docker compose up -d
#   Production:  docker compose -f docker-compose.yml -f docker-compose.prod.yml up -d
#
# MIGRATION NOTE: If you have an existing MongoDB volume initialized with
# different credentials, either:
#   1. Set MONGO_ROOT_PASSWORD below to match your existing password, OR
#   2. Remove the volume to reinitialize: docker volume rm docker_mongodb_data

# =============================================================================
# MongoDB Configuration
# =============================================================================
MONGO_ROOT_USERNAME=admin
MONGO_ROOT_PASSWORD=changeme_use_strong_password

# Database name for the application
MONGO_DATABASE=jwst_data_analysis

# =============================================================================
# Backend Configuration
# =============================================================================
# ASP.NET Core environment (Development, Staging, Production)
ASPNETCORE_ENVIRONMENT=Development

# CORS allowed origins (comma-separated)
# For local development: localhost + 127.0.0.1 (browsers treat these as different origins)
# For production: https://your-frontend-domain.com
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173,http://127.0.0.1:3000,http://127.0.0.1:5173

# =============================================================================
# Frontend Configuration (Vite)
# =============================================================================
# API URL that the frontend will use to connect to the backend
# For local development: http://localhost:5001
# For production: https://your-api-domain.com
VITE_API_URL=http://localhost:5001

# =============================================================================
# Processing Engine Configuration
# =============================================================================
# Directory where MAST downloads will be stored
MAST_DOWNLOAD_DIR=/app/data/mast

# Timeout for MAST downloads in seconds
MAST_DOWNLOAD_TIMEOUT=3600

# =============================================================================
# Storage Configuration
# =============================================================================
# Storage provider: "local" (default) or "s3"
STORAGE_PROVIDER=local

# S3-compatible storage settings (only used when STORAGE_PROVIDER=s3)
# For local development with SeaweedFS: docker compose --profile s3 up -d
S3_BUCKET_NAME=jwst-data
S3_ENDPOINT=http://seaweedfs-s3:8333
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_FORCE_PATH_STYLE=true
# Public endpoint for presigned URLs (must be reachable from browser)
S3_PUBLIC_ENDPOINT=http://localhost:8333

# =============================================================================
# Network Binding
# =============================================================================
# All service ports are bound to 127.0.0.1 (localhost only) by default.
# This prevents services from being accessible from other machines on the
# network. To expose services externally, modify the port bindings in
# docker-compose.yml and docker-compose.override.yml.

# =============================================================================
# Production TLS/HTTPS Configuration
# =============================================================================
# For production deployment with HTTPS:
#
# 1. Place TLS certificates in docker/ssl/:
#    - fullchain.pem (certificate chain)
#    - privkey.pem (private key)
#
# 2. Update CORS_ALLOWED_ORIGINS to use https://
#    CORS_ALLOWED_ORIGINS=https://yourdomain.com
#
# 3. Deploy with:
#    docker compose -f docker-compose.yml -f docker-compose.prod.yml up -d
#
# For Let's Encrypt certificates:
#    certbot certonly --standalone -d yourdomain.com
#    cp /etc/letsencrypt/live/yourdomain.com/fullchain.pem docker/ssl/
#    cp /etc/letsencrypt/live/yourdomain.com/privkey.pem docker/ssl/
